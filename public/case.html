<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>응답은 최상위 JSON 배열이어야 합니다 — 오류 원인과 해결 가이드</title>
  <meta name="description" content="API에서 '응답은 최상위 JSON 배열이어야 합니다' 오류를 만났을 때 점검할 항목과 수정 방법, 테스트·검증 절차를 간단히 안내합니다. JSON 응답 루트 타입(top-level array) 관련 점검과 실무 조치에 초점을 맞춥니다." />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="site-shell">
    <header class="site-header">
      <a class="brand" href="./index.html"><span>💸</span>떼인 돈 계산기</a>
      <a class="ghost-link" href="./calculator.html">메인 계산기</a>
    </header>

    <div class="breadcrumb-wrap">
      <div class="breadcrumb">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 3.172 3 10.172V20a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-4h4v4a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-9.828l-9-7Z"/>
        </svg>
        <a href="./calculator.html">홈</a>
        <span class="breadcrumb-sep">›</span>
        <a href="./index.html">상황별 미수금 가이드</a>
        <span class="breadcrumb-sep">›</span>
        <span class="breadcrumb-current breadcrumb-ellipsis">응답은 최상위 JSON 배열이어야 합니다 — 오류 원인과 해결 가이드</span>
      </div>
    </div>

    <section class="hero">
      <h1>응답은 최상위 JSON 배열이어야 합니다 오류 해결 가이드</h1>
      <p class="subtitle">API 응답을 최상위 배열 리터럴로 돌려보내도록 수정하는 절차를 안내합니다.</p>
      <p class="intro">API 소비자(예: 프런트엔드 애플리케이션)에서 '응답은 최상위 JSON 배열이어야 합니다'라는 메시지를 보셨나요? 이 페이지는 응답 형식을 배열 리터럴로 맞추는 점검 항목과 수정법을 단계별로 안내합니다. 간단한 코드를 고치고 테스트하는 흐름으로 문제를 해결하는 방법을 정리했습니다.</p>
    </section>

    
      <section class="section" id="problem-explained">
        <h2>문제가 무엇인지 간단히 보기</h2>
        <p>일부 API 소비자나 스펙 검증기는 응답 최상위가 객체가 아닌 배열이어야 한다고 요구합니다. 서버가 객체나 문자열, 또는 배열을 포함한 다른 래퍼로 응답할 때 해당 오류가 발생합니다. 먼저 API 스펙(요구하는 루트 타입)을 확인해 어떤 형식을 기대하는지 파악하세요.</p>
      </section>
        
      <section class="section" id="quick-checks">
        <h2>우선 점검할 항목</h2>
        <p>아래 항목을 우선 확인하세요:
- 응답 바디를 로그로 출력해 실제 구조를 확인합니다.
- Content-Type 헤더가 application/json인지 확인합니다.
- 직렬화 함수나 미들웨어가 배열 대신 객체로 감싸지 않는지 점검합니다.</p>
      </section>
        
      <section class="section" id="how-to-fix">
        <h2>일반적인 수정 방법</h2>
        <p>서버 측 직렬화 로직을 조정해 최상위 응답이 배열 리터럴이 되도록 합니다. 빈 결과는 예외 처리로 빈 배열([])을 반환하도록 하고, 불필요한 래퍼 필드를 제거하세요. API 스펙 문서와 테스트 케이스를 함께 업데이트하면 같은 문제가 재발되는 것을 줄이는 데 도움이 될 수 있습니다.</p>
      </section>
        
      <section class="section" id="testing-and-validation">
        <h2>테스트와 검증</h2>
        <p>다음 방법으로 변경을 검증하세요:
- 계약 테스트 또는 스키마 검증 도구로 루트 타입을 자동 확인합니다.
- curl이나 Postman으로 로컬·스테이징 환경에서 실제 응답을 확인합니다.
- CI 파이프라인에서 스키마 검증을 실행해 배포 전에 문제를 잡을 수 있게 합니다.</p>
      </section>
        
      <section class="section" id="when-to-contact-others">
        <h2>누구에게 연락해야 할지</h2>
        <p>문제 원인은 백엔드·프런트엔드 모두와 관련될 수 있습니다. API 스펙 문서와 샘플 응답을 공유해 관련 팀과 함께 원인을 좁히세요. 외부 API라면 제공자에게 기대 형식(루트 타입) 변경 가능 여부를 문의하는 것이 필요할 수 있습니다.</p>
      </section>
        
      <section class="section" id="examples_hint">
        <h2>실무에서 자주 보는 사례</h2>
        <p>자주 보는 사례와 권장 대응입니다:
- 빈 결과를 객체로 보내는 경우: 빈 배열([])을 반환하도록 변경합니다.
- 페이징 응답을 항목 목록으로 감싸는 경우: 스펙이 배열을 요구하면 항목 배열을 루트로 반환하고, 메타데이터가 필요하면 별도의 필드나 헤더·버전 관리를 고려하세요.</p>
      </section>
        
      <section class="section" id="next-steps">
        <h2>요약 및 다음 단계</h2>
        <p>요약: 대부분의 오류는 직렬화 단계나 응답 래퍼 때문에 발생합니다. 먼저 엔드포인트의 실제 응답을 로그로 확인하세요. 문제를 확인하면 샘플 응답과 로그를 공유해 관련 팀이나 API 제공자와 협의하시기 바랍니다. 필요하면 계약 테스트 도입을 검토하세요. 지금 사용하는 엔드포인트 응답을 로그로 확인해 보세요.</p>
      </section>
        

    <section class="section">
      <h2>FAQ</h2>
      <div class="mb-4 rounded-md bg-gray-50 border border-gray-200 px-3 py-2 text-xs text-gray-600">
        ※ 아래 답변들은 실제 사례들을 바탕으로 정리한 <strong>일반적인 안내</strong>입니다.<br>
        개별 사건에 그대로 적용되지는 않을 수 있고, 구체적인 결론은 사실관계·증거·법원 판단에 따라 달라질 수 있습니다.
      </div>
      <div class="faq">
        
        <details>
          <summary>왜 최상위가 배열이어야 하나요?</summary>
          <div>API 스펙이나 API 소비자(예: 라이브러리 또는 프런트엔드 코드)가 루트 타입으로 배열을 기대하는 경우입니다. 우선 스펙을 확인해 어떤 타입을 요구하는지 파악하는 것이 필요합니다.</div>
        </details>
        
        <details>
          <summary>이미 객체로 응답하고 있는데 호환성 문제는 어떻게 해결하나요?</summary>
          <div>버전 관리와 문서화로 API 소비자와 협의해 점진적으로 변경하는 방법이 안전합니다. 호환성 레이어를 두어 이전 소비자를 유지하면서 새 형식을 지원할 수도 있습니다.</div>
        </details>
        
        <details>
          <summary>테스트로 어떻게 검증하면 좋을까요?</summary>
          <div>계약 테스트 또는 스키마 검증 도구로 루트 타입 검증을 자동화하세요. 간단한 통합 테스트로 실제 바디를 파싱해 타입을 확인하는 방법도 효과적입니다.</div>
        </details>
        
        <details>
          <summary>배열 대신 객체를 사용해도 되는 예외 상황이 있나요?</summary>
          <div>예외적으로 메타데이터(예: 페이징 정보, 전체 카운트)를 함께 전달해야 하는 경우 루트 객체를 사용하는 것이 일반적입니다. 이럴 때는 스펙으로 팀 간 합의를 하거나 API 버전 관리를 통해 변경을 도입하는 것이 좋습니다.</div>
        </details>
        
      </div>
      <p class="mt-4 text-xs text-gray-500">
        ※ 이 Q&A는 실제 상담을 대신하는 것이 아니라, 비슷한 상황에서 많이 나오는 질문을 정리한 일반적인 안내입니다.
      </p>
    </section>

    <section class="section">
      <h2>떼인 돈 계산기로 금액 확인하기</h2>
      <p>원금과 약정일을 넣어 지연손해금을 계산해 두면 요구액을 명확히 정리할 수 있습니다. 금액을 확인한 뒤 내용증명이나 지급명령 서류를 준비할지 검토해 보세요.</p>
      <a class="cta" href="./calculator.html">떼인 돈 계산기 열기</a>
      <div class="notice-box">
        이 계산기는 입력하신 값을 기준으로 한 <strong>참고용 시뮬레이션</strong>입니다.<br />
        실제 소송·집행 결과와 다를 수 있으며, 최종 판단은 법률 전문가와 상의해 주세요.
      </div>
    </section>

    <section class="section" aria-label="상황 정리 키트 안내">
      <h2 class="section-title">비슷한 일이 반복될 때를 대비해, 셀프 정리 키트를 준비 중입니다</h2>
      <p class="text-sm text-gray-700">
        이 페이지와 계산기로 이번 사건을 한 번 정리해 보셨다면, 앞으로 비슷한 상황이 생겨도 같은 틀로 정리할 수 있도록 돕는 '셀프 정리 키트'를 준비하고 있습니다.
      </p>
      <ul class="mt-3 text-sm text-gray-700 space-y-1">
        <li>• 사건 요약 & 타임라인 한 장 템플릿</li>
        <li>• 증거·자료 체크리스트</li>
        <li>• 관계·상황별 연락 예시문 모음</li>
        <li>• 전문가 상담이 더 나을 수 있는지 점검하는 레드 라인 체크리스트</li>
      </ul>
      <p class="mt-2 text-xs text-gray-500">
        레드 라인 체크리스트는 형사 가능성, 고액·복잡한 분쟁, 다수 피해자가 얽힌 경우처럼 전문가 상담이 더 안전할 수 있는 상황을 스스로 점검해 보는 표입니다. 키트는 준비 중이며, 출시 알림은 결과 화면에서 신청하실 수 있습니다.
      </p>
    </section>

    <section class="section" id="disclaimer" aria-label="면책 및 법령 안내">
      <h2>면책 및 법령 안내</h2>
      <p class="text-sm text-gray-700">이 안내는 일반적인 기술 설명입니다. 특정 시스템의 동작이나 결과를 보장하지 않습니다. 상세한 적용 방법은 각 시스템 환경과 요구사항을 고려해 검토하세요.</p>
      <p class="text-xs text-gray-600 mt-2">제공된 정보와 예시는 일반적 사례를 바탕으로 합니다. 실제 로그·데이터 등 개인정보는 관련 법령과 내부 정책에 따라 필요한 범위에서만 안전하게 처리하세요.</p>
    </section>

    <p class="footer">본 페이지의 안내는 일반적인 절차를 정리한 것으로, 개별 사건에 대한 법률 자문이 아닙니다.</p>
    <p class="footer" style="font-size:12px;color:#6b7280;">※ 본 서비스는 일반 정보 제공 및 계산 예시일 뿐, 개별 사건에 대한 법률 자문이 아닙니다. 실제 대응은 법률 전문가와 상의해 절차를 결정해 주세요.</p>
  </div>
</body>
</html>